# Compiler Flags
PKG_CFLAGS = -I$(R_HOME)/include

# Platform Identification
UNAME := $(shell uname)

# Platform-Specific Configuration for Library Linking
ifeq ($(UNAME), Linux)
    PKG_LIBS = -L../inst/libs/linux -lprismaid_linux_amd64 -Wl,-rpath,'$$ORIGIN/../libs/linux'
endif

ifeq ($(UNAME), Windows_NT)
    # Windows-specific linking with .def file
    PKG_LIBS = -L../inst/libs/windows -l:prismaid_windows_amd64.dll -Wl,--output-def,libprismaid_windows_amd64.def
endif

# Default target
all: R_wrapper.o

# Compile R_wrapper.c to R_wrapper.o
R_wrapper.o: R_wrapper.c
	$(CC) $(PKG_CFLAGS) -c R_wrapper.c -o R_wrapper.o
